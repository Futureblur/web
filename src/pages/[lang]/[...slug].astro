---
import { getCollection } from "astro:content";
import Layout from "@layouts/Layout.astro";
import Container from "@components/Container.astro";

export async function getStaticPaths() {
    const news = await getCollection("markdown");
    const paths = news.map((post) => {
        const [lang, ...slug] = post.slug.split("/");
        return {
            params: { lang, slug: slug.join("/") || undefined },
            props: post,
        };
    });

    return paths;
}

const post = Astro.props;
const { Content } = await post.render();
---

<Layout
    title={post.data.title}
    description={post.data.description}
    cover={post.data.cover.src}
>
    <Container props="max-w-[730px] page-spacing">
        <div class="my-10 space-y-2">
            <h1
                class="animate pb-2 font-serif text-5xl tracking-tight text-black dark:text-white md:text-6xl"
                data-pagefind-body
            >
                {post.data.title}
            </h1>
        </div>
        <article class="animate text-lg" data-pagefind-body>
            <Content />
        </article>
    </Container>
</Layout>
